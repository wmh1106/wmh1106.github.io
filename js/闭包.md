# 闭包

「函数」和「函数内部能访问到的变量」（也叫环境）的总和，就是一个闭包

```js
function foo(){
  //// ---------------- ////
  var local = 1
  function bar(){
    local++
    return local
  }
  //// ---------------- ////
  return bar
}

var func = foo()
func()
```

- 函数套函数：只是为了造出一个局部变量，跟闭包无关
  - 如果把foo干掉，local就是全局变量，达不到使用闭包的目的——隐藏变量
- return bar：如果不 return，你就无法使用这个闭包，所以 return bar 只是为了 bar 能被使用，也跟闭包无关

作用

闭包常常用来「间接访问一个变量」。换句话说，「隐藏一个变量」

---

闭包是 JS 函数作用域的副产品。换句话说，正是由于 JS 的函数内部可以使用函数外部的变量，所以这段代码正好符合了闭包的定义。而不是 JS 故意要使用闭包。

内存泄露是指你用不到（访问不到）的变量，依然占居着内存空间，不能被再次利用起来。

## 立即执行函数

声明一个匿名函数，马上调用这个匿名函数

作用：

创建一个独立的作用域，在这个作用域里面设置变量，外面访问不到（即避免「变量污染」）

常见问题：for套元素事件